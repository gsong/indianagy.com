---
import { ClientRouter } from "astro:transitions";
import alice from "@fontsource/alice/files/alice-latin-400-normal.woff2?url";
import workSans from "@fontsource-variable/work-sans/files/work-sans-latin-wght-normal.woff2?url";

interface Props {
  title?: string;
  description?: string;
}

const { title, description } = Astro.props;

const SITE = import.meta.env.SITE;
const BASE_URL = import.meta.env.BASE_URL;
const GA4_MEASUREMENT_ID = import.meta.env.PUBLIC_GA4_MEASUREMENT_ID;
const SITE_NAME = "India Nagy's Portfolio";
const TITLE = title ?? "India Nagy | Art Director & Graphic Designer";
const DESCRIPTION =
  description ??
  "Creative and versatile Art Director and Graphic Designer with extensive experience shaping iconic brands. Passionate about storytelling, collaboration, and turning curiosity into impactful design solutions.";
const IMAGE_URL =
  "https://pub-01eadd61e87f425eb8cdb0a64a96ed42.r2.dev/social-card.jpg";
---

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff" />
  <meta name="color-scheme" content="light" />

  <link
    rel="preload"
    as="font"
    type="font/woff2"
    href={alice}
    crossorigin="anonymous"
  />
  <link
    rel="preload"
    as="font"
    type="font/woff2"
    href={workSans}
    crossorigin="anonymous"
  />

  <link rel="icon" href={`${BASE_URL}favicon.ico`} sizes="32x32" />
  <link rel="apple-touch-icon" href={`${BASE_URL}apple-touch-icon.png`} />

  <link rel="sitemap" href="/sitemap-index.xml" />

  <title>{TITLE}</title>
  <meta name="description" content={DESCRIPTION} />
  <meta name="generator" content={Astro.generator} />

  <!-- Open Graph Tags -->
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content={SITE_NAME} />
  <meta property="og:title" content={TITLE} />
  <meta property="og:description" content={DESCRIPTION} />
  <meta property="og:url" content={SITE} />
  <meta property="og:image" content={IMAGE_URL} />
  <meta property="og:image:width" content="1280" />
  <meta property="og:image:height" content="672" />

  <!-- Twitter Tags -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={TITLE} />
  <meta name="twitter:description" content={DESCRIPTION} />
  <meta name="twitter:url" content={SITE} />
  <meta name="twitter:image" content={IMAGE_URL} />

  <ClientRouter />

  {
    GA4_MEASUREMENT_ID && (
      <>
        <!-- Google Analytics -->
        <script
          is:inline
          async
          src={`https://www.googletagmanager.com/gtag/js?id=${GA4_MEASUREMENT_ID}`}
        />
        <script is:inline>
          window.dataLayer = window.dataLayer || [];
          function gtag() {
            dataLayer.push(arguments);
          }
        </script>
        <script is:inline data-ga-id={GA4_MEASUREMENT_ID}>
          // Handle View Transitions with GA4
          document.addEventListener(
            "astro:page-load",
            () => {
              const gaId = document
                .querySelector("[data-ga-id]")
                ?.getAttribute("data-ga-id");
              if (gaId) {
                gtag("js", new Date());
                gtag("config", gaId);
              }
            },
            { once: false }
          );
        </script>
      </>
    )
  }
</head>
